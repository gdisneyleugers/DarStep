<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

    <head>
    <title>GSThroughput class documentation</title>
  </head>
  <body>
    <font face="serif">
    <h1><a name="title$GSThroughput">GSThroughput class documentation</a></h1>
    <h3>Authors</h3>
    <dl>
      <dt>Richard Frith-Macdonald (<a href="mailto:rfm@gnu.org"><code>rfm@gnu.org</code></a>)</dt>
      <dd>
      </dd>
    </dl>
    <p><b>Copyright:</b> (C) 2005-2008 Free Software Foundation, Inc.</p>

        <div>
      <hr width="50%" align="left" />
      <h3>Contents -</h3>
      <ol>
        <li>
          <a href="#001000000000">Software documentation for the GSThroughput class</a>
        </li>
        <li>
          <a href="#002000000000">GSThroughput constants</a>
        </li>
      </ol>
      <hr width="50%" align="left" />
    </div>

          <h1><a name="001000000000">
        Software documentation for the GSThroughput class
      </a></h1>
    <h2><a name="class$GSThroughput">GSThroughput</a> : <a rel="gsdoc" href="/usr/share/GNUstep/Documentation/Developer/Base/Reference/NSObject.html#class$NSObject">NSObject</a></h2>
    <blockquote class="declared">
      <dl>
        <dt><b>Declared in:</b></dt>
        <dd>GSThroughput.h</dd>
      </dl>
    </blockquote>
    <div class="desc">
      
          
    </p>
    <p>

            The GSThroughput class is used maintain statistics
            about the number of events or the duration of
            operations in your software.
              </p>
    <p>
      
          
    </p>
    <p>

            For performance reasons, the class avoids locking and
            you must ensure that an instance of the class is only
            ever used by a single thread (the one in which it was
            created). You are responsible for ensuring that a
            run loop runs in each thread in which you use an
            instance, so that stats can be updated for that
            thread every second.
              </p>
    <p>
      
          
    </p>
    <p>

            You create an instance of the class for each
            event/operation that you are interested in
            monitoring, and you call the
            <a rel="gsdoc" href="#method$GSThroughput-add$">
              -add:
            </a>

            or
            <a rel="gsdoc" href="#method$GSThroughput-addDuration$">
              -addDuration:
            </a>

            method to record events. <br /> For duration
            logging, you may also use the
            <a rel="gsdoc" href="#method$GSThroughput-startDuration$">
              -startDuration:
            </a>

            and
            <a rel="gsdoc" href="#method$GSThroughput-endDuration">
              -endDuration
            </a>

            methods to handle adding of the amount of time
            taken between the two calls.
              </p>
    <p>
      
          
    </p>
    <p>

            To dump a record of the gathered statistics, you may
            call the
            <a rel="gsdoc" href="#method$GSThroughput-description">
              -description
            </a>

            method of an instance or the class
            <a rel="gsdoc" href="#method$GSThroughput+description">
              +description
            </a>

            method to dump statistics for all instances in the
            current thread. <br /> If you need to gather a
            record for all the threads you use, you must
            generate a dump in each thread and combine the
            results.
              </p>
    <p>
      
          
    </p>
    <p>

            To be notified of statistics at the end of each minute,
            you may call the
            <a rel="gsdoc" href="#method$GSThroughput-enableNotifications$">
              -enableNotifications:
            </a>

            method for an instance. The notifications are
            generated in the thread that instance belongs to.
              </p>
    <p>
      
        
    </div>
    <hr width="50%" align="left" />
    <a href="#_GSThroughput_ivars">Instance Variables</a>
    <br/><br/>
    <b>Method summary</b>
    <ul>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput+allInstances">+allInstances</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput+description">+description</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput+setTick$">+setTick:</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput+tick">+tick</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-add$">-add:</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-add$duration$">-add:duration:</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-addDuration$">-addDuration:</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-description">-description</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-enableNotifications$">-enableNotifications:</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-endDuration">-endDuration</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-endDuration$">-endDuration:</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-init">-init</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-initWithDurations$forPeriods$ofLength$">-initWithDurations:forPeriods:ofLength:</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-name">-name</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-setName$">-setName:</a></li>
      <li><a rel="gsdoc" href="GSThroughput.html#method$GSThroughput-startDuration$">-startDuration:</a></li>
    </ul>
    <hr width="50%" align="left" />
<div class="method">
    <h3><a name="method$GSThroughput+allInstances">allInstances&nbsp;</a></h3>
    + (<a rel="gsdoc" href="/usr/share/GNUstep/Documentation/Developer/Base/Reference/NSArray.html#class$NSArray">NSArray</a>*) <b>allInstances</b>;<br />
    <div class="desc">
      
            Return all the current throughput measuring objects
            in the current thread. NB. This does not return
            instances from other threads.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput+description">description&nbsp;</a></h3>
    + (<a rel="gsdoc" href="/usr/share/GNUstep/Documentation/Developer/Base/Reference/NSString.html#class$NSString">NSString</a>*) <b>description</b>;<br />
    <div class="desc">
      
            Return a report on all GSThroughput instances in the
            current thread... <br /> This calls the
            <a rel="gsdoc" href="#method$GSThroughput-description">
              [GSThroughput -description]
            </a>

            method of the individual instances to get a report
            on each one. <br /> The results are ordered
            alphabetically by name of the instances (an
            instance without a name is treated as having an
            empty string as a name).
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput+setTick$">setTick:&nbsp;</a></h3>
    + (void) <b>setTick:</b> (BOOL)aFlag;<br />
    <div class="desc">
      
            Instructs the monitoring system to use a timer at
            the start of each second for keeping its idea of the
            current time up to date. This timer is used to call
            the <a rel="gsdoc" href="#method$GSThroughput+tick">+tick</a>
 method in
            the current thread. <br /> Passing a value of
            <code>NO</code> for <var>aFlag</var> will turn off
            the timer for the current thread. <br /> For the timer
            to work, the thread&apos;s runloop must be running. <br />
            Keeping the notion of the current time up to date
            is important for instances configured to record stats
            broken down over a number of periods, since the
            periodic breakdown must be adjusted each second.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput+tick">tick&nbsp;</a></h3>
    + (void) <b>tick</b>;<br />
    <div class="desc">
      
            Updates the monitoring system&apos;s notion of the
            current time for all instances associated with the
            current thread. <br /> This should be called at the
            start of each second (or more often) if you want an
            accurate breakdown of monitoring by the second.
            <br /> If you don&apos;t want to call this yourself, you
            can call
            <a rel="gsdoc" href="#method$GSThroughput+setTick$">
              +setTick:
            </a>

            to have it called automatically. <br /> If you are not
            using any instances of the class configured to
            maintain a breakdown of stats by periods, you do
            not need to call this method.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-add$">add:&nbsp;</a></h3>
    - (void) <b>add:</b> (unsigned)count;<br />
    <div class="desc">
      
            Add to the <var>count</var> of the number of
            transactions for the receiver. <br /> You may
            use this method only if the receiver was initialised
            with duration logging turned off.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-add$duration$">add:&nbsp;duration:&nbsp;</a></h3>
    - (void) <b>add:</b> (unsigned)count<b> duration:</b> (<a rel="gsdoc" href="/usr/share/GNUstep/Documentation/Developer/Base/Reference/TypesAndConstants.html#type$NSTimeInterval">NSTimeInterval</a>)length;<br />
    <div class="desc">
      
            Adds a record for multiple events of the specified
            <em>total</em> duration. <br /> This is useful where
            you know a lot of similar events have completed in a
            particular period of time, but can&apos;t afford to
            measure the duration of the individual events
            because the timing overheads would be too great.
            <br /> You may use this method only if the receiver
            was initialised with duration logging turned on.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-addDuration$">addDuration:&nbsp;</a></h3>
    - (void) <b>addDuration:</b> (<a rel="gsdoc" href="/usr/share/GNUstep/Documentation/Developer/Base/Reference/TypesAndConstants.html#type$NSTimeInterval">NSTimeInterval</a>)length;<br />
    <div class="desc">
      
            Adds a record for a single event of the specified
            duration. <br /> You may use this method only if
            the receiver was initialised with duration logging
            turned on.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-description">description&nbsp;</a></h3>
    - (<a rel="gsdoc" href="/usr/share/GNUstep/Documentation/Developer/Base/Reference/NSString.html#class$NSString">NSString</a>*) <b>description</b>;<br />
    <div class="desc">
      
            Returns a string describing the status of the
            receiver. <br /> For an instance configured to
            maintain a periodic breakdown of stats, this
            reports information for the current second, all
            seconds in the current minute, all minutes in the
            current period, and all periods in the configured
            number of periods. <br /> For an instance configured
            with no periodic breakdown, this produces a
            <strong>short</strong> summary of the total count
            of events and, where durations are used, the maximum,
            minimum and average duration of events.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-enableNotifications$">enableNotifications:&nbsp;</a></h3>
    - (BOOL) <b>enableNotifications:</b> (BOOL)flag;<br />
    <div class="desc">
      
            Sets a <var>flag</var> to say whether the receiver
            will send GSThroughputNotification at the end of each
            minute to provide information about statistics.
            <br /> The method returnes the previous setting. The
            initial setting is <code>NO</code>. <br /> The
            notification object is the reciever, and the
            user info dictionary contains some or all of the
            following keys depending on how the receiver was
            configured:
            
      <dl>
        <dt>GSThroughputCountKey</dt>
        <dd>
          
                The number of events recorded (
                <strong>unsigned</strong> integer number)
              
        </dd>
        <dt>GSThroughputMaximumKey</dt>
        <dd>
          
                The maximum event duration (<strong>double</strong>
                floating point number)
              
        </dd>
        <dt>GSThroughputMinimumKey</dt>
        <dd>
          
                The minimum event duration (<strong>double</strong>
                floating point number) or -1.0 if no events
                occurred during the minute.
              
        </dd>
        <dt>GSThroughputTimeKey</dt>
        <dd>
          
                The time of the start of the minute (an NSDate)
              
        </dd>
        <dt>GSThroughputTotalKey</dt>
        <dd>
          
                The sum of event durations (<strong>double</strong>
                floating point number)
              
        </dd>
      </dl>
      
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-endDuration">endDuration&nbsp;</a></h3>
    - (void) <b>endDuration</b>;<br />
    <div class="desc">
      
            Ends duration recording for the current event started
            by a matching call to the
            <a rel="gsdoc" href="#method$GSThroughput-startDuration$">
              -startDuration:
            </a>

            method. <br /> Calls to this method without a
            matching call to
            <a rel="gsdoc" href="#method$GSThroughput-startDuration$">
              -startDuration:
            </a>

            are quietly ignored. This is useful if you wish to time
            a function or method by starting/ending timing
            before/after calling it, but also want the
            function/method to be able to end timing of
            itsself before it calls another function/method.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-endDuration$">endDuration:&nbsp;</a></h3>
    - (void) <b>endDuration:</b> (unsigned)count;<br />
    <div class="desc">
      
            Acts like
            <a rel="gsdoc" href="#method$GSThroughput-endDuration">
              -endDuration
            </a>

            but records the duration as a total for
            <var>count</var> events (if <var>count</var> is zero
            then this ends the interval started by the
            corresponding
            <a rel="gsdoc" href="#method$GSThroughput-startDuration$">
              -startDuration:
            </a>

            call, but nothing is logged). <br /> This can be used
            when recording multiple events where the overhead of
            timing each event individually would be too great.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-init">init&nbsp;</a></h3>
    - (id) <b>init</b>;<br />
    <div class="desc">
      
            Initialises the receiver for duration logging
            (in the current thread only) for fifteen minute periods
            over the last twentyfour hours.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-initWithDurations$forPeriods$ofLength$">initWithDurations:&nbsp;forPeriods:&nbsp;ofLength:&nbsp;</a></h3>
    - (id) <b>initWithDurations:</b> (BOOL)aFlag<b> forPeriods:</b> (unsigned)numberOfPeriods<b> ofLength:</b> (unsigned)minutesPerPeriod;<br />
This is a designated initialiser for the class.<br />
    <div class="desc">
      
            
    </p>
    <p>

              Initialises the receiver to maintain stats
              (for the current thread only) over a particular time
              range, specifying whether duration statistics are
              to be maintained, or just event/transaction counts.
                </p>
    <p>
      
            
    </p>
    <p>

              If the specified <var>numberOfPeriods</var> or
              <var>minutesPerPeriod</var> is zero, only a running
              total is maintained rather than a per-second
              breakdown for the current minute and per minute
              breakdown for the current period and period
              breakdown for the number of periods.
                </p>
    <p>
      
            
    </p>
    <p>

              If all instances in a thread are initialised with
              <var>numberOfPeriods</var> or
              <var>minutesPerPeriod</var> of zero, the
              <a rel="gsdoc" href="#method$GSThroughput+tick">
                +tick
              </a>

              method does not need to be called and
              <a rel="gsdoc" href="#method$GSThroughput+setTick$">
                +setTick:
              </a>

              should not be used.
                </p>
    <p>
      
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-name">name&nbsp;</a></h3>
    - (<a rel="gsdoc" href="/usr/share/GNUstep/Documentation/Developer/Base/Reference/NSString.html#class$NSString">NSString</a>*) <b>name</b>;<br />
    <div class="desc">
      
            Return the name of this instance (as set using
            -setName:). <br /> This is used in the
            <a rel="gsdoc" href="#method$GSThroughput-description">
              -description
            </a>

            method and for ordering instances in the
            <a rel="gsdoc" href="#method$GSThroughput+description">
              +description
            </a>

            method.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-setName$">setName:&nbsp;</a></h3>
    - (void) <b>setName:</b> (<a rel="gsdoc" href="/usr/share/GNUstep/Documentation/Developer/Base/Reference/NSString.html#class$NSString">NSString</a>*)name;<br />
    <div class="desc">
      
            Sets the <var>name</var> of this instance.
          
    </div>
    <hr width="25%" align="left" />
</div>
<div class="method">
    <h3><a name="method$GSThroughput-startDuration$">startDuration:&nbsp;</a></h3>
    - (void) <b>startDuration:</b> (<a rel="gsdoc" href="/usr/share/GNUstep/Documentation/Developer/Base/Reference/NSString.html#class$NSString">NSString</a>*)name;<br />
    <div class="desc">
      
            Starts recording the duration of an event. This must
            be followed by a matching call to the
            <a rel="gsdoc" href="#method$GSThroughput-endDuration">
              -endDuration
            </a>

            method. <br /> The <var>name</var> argument is used
            to identify the location of the call for
            debugging/logging purposes, and you must
            ensure that the string continues to exist up to the
            point where
            <a rel="gsdoc" href="#method$GSThroughput-endDuration">
              -endDuration
            </a>

            is called, as the receiver will not retain it. <br />
            You may use this method only if the receiver was
            initialised with duration logging turned on.
            <br /> Use of this method if the reciever does not
            support duration logging or if the method has
            already been called without a matching call to
            <a rel="gsdoc" href="#method$GSThroughput-endDuration">
              -endDuration
            </a>

            will cause an exception to be raised.
          
    </div>
    <hr width="25%" align="left" />
</div>
<a name="_GSThroughput_ivars"/>    <br/><hr width="50%" align="left" />
    <h2>Instance Variables for GSThroughput Class</h2>
    <h3><a name="ivariable$GSThroughput*_data">_data</a></h3>
    @protected void* <b>_data</b>;<br />
    <div class="desc">
      
            <em>Warning</em> the underscore at the start of the
            name of this instance variable indicates that, even
            though it is not technically <em>private</em>, it is
            intended for internal use within the package, and
            you should not use the variable in other code.
          
    </div>
    <hr width="25%" align="left" />
    <br/><hr width="50%" align="left" /><br/>

          <h1><a name="002000000000">GSThroughput constants</a></h1>
    <p>
    </p>
    <h3><a name="constant$GSThroughputCountKey">GSThroughputCountKey</a></h3>
    NSString* const GSThroughputCountKey;<br />
    <div class="desc">
      
          <em>Description forthcoming.</em>
        
    </div>
    <hr width="25%" align="left" />
    <h3><a name="constant$GSThroughputMaximumKey">GSThroughputMaximumKey</a></h3>
    NSString* const GSThroughputMaximumKey;<br />
    <div class="desc">
      
          <em>Description forthcoming.</em>
        
    </div>
    <hr width="25%" align="left" />
    <h3><a name="constant$GSThroughputMinimumKey">GSThroughputMinimumKey</a></h3>
    NSString* const GSThroughputMinimumKey;<br />
    <div class="desc">
      
          <em>Description forthcoming.</em>
        
    </div>
    <hr width="25%" align="left" />
    <h3><a name="constant$GSThroughputNotification">GSThroughputNotification</a></h3>
    NSString* const GSThroughputNotification;<br />
    <div class="desc">
      
          <em>Description forthcoming.</em>
        
    </div>
    <hr width="25%" align="left" />
    <h3><a name="constant$GSThroughputTimeKey">GSThroughputTimeKey</a></h3>
    NSString* const GSThroughputTimeKey;<br />
    <div class="desc">
      
          <em>Description forthcoming.</em>
        
    </div>
    <hr width="25%" align="left" />
    <h3><a name="constant$GSThroughputTotalKey">GSThroughputTotalKey</a></h3>
    NSString* const GSThroughputTotalKey;<br />
    <div class="desc">
      
          <em>Description forthcoming.</em>
        
    </div>
    <hr width="25%" align="left" />
    <br />
    </font>
</body>
</html>
